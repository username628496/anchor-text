<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Anchor Text Creator v1</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body.dark { background-color: #1f2937; color: #e5e7eb; }
    .dark textarea, .dark .output-box, .dark .history-box { background-color: #374151; color: #e5e7eb; }
    .history-entry { border-bottom: 1px solid #ddd; padding: 5px 0; }
    .toggle-details { cursor: pointer; color: #3b82f6; font-size: 0.9rem; }
  </style>
</head>
<body class="bg-gray-100 text-gray-800 transition-all">
  <header class="bg-black text-white px-6 py-4 flex justify-between items-center">
    <h1 class="text-xl font-bold">‚öì Anchor Text Creator v1</h1>
    <button onclick="toggleDarkMode()" class="bg-white text-blue-700 px-4 py-1 rounded">‚òæ‚òº</button>
  </header>

  <main class="max-w-6xl mx-auto px-4 py-6">
    <div class="grid grid-cols-2 gap-4 mb-4">
      <div>
        <label class="font-semibold block mb-1">Nh·∫≠p Anchors</label>
        <textarea id="anchorInput" class="w-full h-48 p-3 border rounded font-mono"></textarea>
      </div>
      <div>
        <label class="font-semibold block mb-1">Nh·∫≠p URLs</label>
        <textarea id="urlInput" class="w-full h-48 p-3 border rounded font-mono"></textarea>
      </div>
    </div>

    <label class="inline-flex items-center mb-4">
      <input type="checkbox" id="targetBlank" class="mr-2" />
      <span>Th√™m <code>target="_blank"</code></span>
    </label>

    <div class="space-x-2 mb-6">
      <button onclick="generateLinks()" class="bg-blue-600 text-white px-4 py-2 rounded">T·∫°o Anchor Text</button>
      <button onclick="exportHtml()" class="bg-green-600 text-white px-4 py-2 rounded">Xu·∫•t HTML</button>
    </div>

    <p id="warningMessage" class="text-red-600 font-semibold mb-4"></p>

    <section class="mb-6">
      <h3 class="text-lg font-semibold mb-2">Anchor Text Ki·ªÉu 1</h3>
      <div class="output-box border p-3 rounded overflow-x-auto whitespace-nowrap bg-white" id="anchorWithPipes"></div>
      <button onclick="copyDivContent('anchorWithPipes')" class="mt-2 px-3 py-1 bg-gray-800 text-white rounded">Copy</button>
    </section>

    <section class="mb-6">
      <h3 class="text-lg font-semibold mb-2">Anchor Text Ki·ªÉu 2</h3>
      <div class="output-box border p-3 rounded overflow-x-auto whitespace-nowrap bg-white" id="anchorWithSpaces"></div>
      <button onclick="copyDivContent('anchorWithSpaces')" class="mt-2 px-3 py-1 bg-gray-800 text-white rounded">Copy</button>
    </section>

    <section class="mb-10">
      <h3 class="text-lg font-semibold mb-2">üïò L·ªãch S·ª≠ Thao T√°c</h3>
      <div id="historyLog" class="history-box border p-3 rounded bg-white text-sm"></div>
    </section>
  </main>

  <footer class="bg-gray-800 text-white text-center py-4">
    –ü –∏ —Ç–µ—Ä ¬© 2025
  </footer>

<script>
  let history = [];

  function generateLinks() {
    const anchors = document.getElementById("anchorInput").value.trim().split("\n");
    const urls = document.getElementById("urlInput").value.trim().split("\n");
    const targetBlank = document.getElementById("targetBlank").checked;

    const minLength = Math.min(anchors.length, urls.length);
    document.getElementById("warningMessage").innerText = anchors.length !== urls.length 
      ? `‚ö†Ô∏è Anchor: ${anchors.length}, URL: ${urls.length}. X·ª≠ l√Ω ${minLength} d√≤ng.` : "";

    let pipeLinks = "", spaceLinks = "";
    for (let i = 0; i < minLength; i++) {
      const anchor = anchors[i].trim();
      const url = urls[i].trim();

      let output = "";
      if(anchor.startsWith("http")) {
        output = url;  // Naked link
      } else {
        output = `<a href="${url}"${targetBlank ? ' target="_blank"' : ''}>${anchor}</a>`;
      }

      pipeLinks += output + (i < minLength -1 ? " | " : "");
      spaceLinks += output + " ";
    }

    document.getElementById("anchorWithPipes").innerHTML = pipeLinks.trim();
    document.getElementById("anchorWithSpaces").innerHTML = spaceLinks.trim();

    const time = new Date().toLocaleTimeString();
    history.unshift({ time, anchors: anchors.slice(0, minLength) });
    if (history.length > 20) history.pop();
    renderHistory();
  }

  function renderHistory() {
    const container = document.getElementById("historyLog");
    container.innerHTML = "";
    history.forEach((entry, index) => {
      const div = document.createElement("div");
      div.className = "history-entry";
      const toggleId = `detail-${index}`;
      div.innerHTML = `<strong>${entry.time}</strong> - ${entry.anchors.length} anchor 
        <span class="toggle-details" onclick="toggleDetails('${toggleId}')">[Xem chi ti·∫øt]</span>
        <div id="${toggleId}" style="display:none; margin-top:5px;">‚Ä¢ ${entry.anchors.join(", ")}</div>`;
      container.appendChild(div);
    });
  }

  function toggleDetails(id) {
    const el = document.getElementById(id);
    el.style.display = el.style.display === "none" ? "block" : "none";
  }

  function copyDivContent(id) {
    const range = document.createRange();
    range.selectNode(document.getElementById(id));
    window.getSelection().removeAllRanges();
    window.getSelection().addRange(range);
    document.execCommand("copy");
    window.getSelection().removeAllRanges();
    alert("ƒê√£ copy!");
  }

  function exportHtml() {
    const html = document.getElementById("anchorWithPipes").innerHTML + "<br><br>" +
                 document.getElementById("anchorWithSpaces").innerHTML;
    const blob = new Blob(["<html><body>" + html + "</body></html>"], { type: "text/html" });
    const link = document.createElement("a");
    link.href = URL.createObjectURL(blob);
    link.download = "anchor-links.html";
    link.click();
  }

  function toggleDarkMode() {
    document.body.classList.toggle("dark");
  }
</script>

</body>
</html>
